(this["webpackJsonpcovid19-dashboard"]=this["webpackJsonpcovid19-dashboard"]||[]).push([[0],{120:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},127:function(e,t,n){},234:function(e,t,n){},235:function(e,t,n){},236:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n.n(c),a=n(35),o=n.n(a),s=n(3),i=(n(99),n(56)),l=n.n(i),u=n(86),d=n(10),j=n(87),b=n.n(j),O=(n(119),n(239)),h=n(240),p=(n(120),n(1)),v=function(){return Object(p.jsxs)("header",{className:"header",children:[Object(p.jsxs)("div",{className:"logo",children:[Object(p.jsxs)("h1",{className:"title",children:[Object(p.jsx)("div",{children:"Covid-19"}),Object(p.jsx)("div",{children:"Dashboard"})]}),Object(p.jsx)("i",{className:"fas fa-viruses"})]}),Object(p.jsx)("a",{href:"https://github.com/odil-abdulloyev/covid19-dashboard",target:"_blank",rel:"noreferrer",className:"github",children:Object(p.jsx)("i",{className:"fab fa-github"})})]})},x=(n(122),function(e){var t=e.listContent,n=void 0===t?null:t,c=e.mapContent,r=void 0===c?null:c,a=e.tableContent,o=void 0===a?null:a,s=e.chartContent,i=void 0===s?null:s;return Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(v,{}),Object(p.jsxs)(O.a,{children:[Object(p.jsx)(h.a,{xxl:3,xl:3,l:3,md:3,sm:{order:1,span:5},className:"list-container",children:n}),Object(p.jsx)(h.a,{xxl:{order:1,span:5},xl:{order:1,span:5},l:{order:1,span:5},md:{order:1,span:5},sm:{order:-1,span:12},className:"map-container",children:r}),Object(p.jsxs)(h.a,{xxl:4,xl:4,l:4,md:4,sm:{order:2,span:7},className:"table-chart-container",children:[Object(p.jsx)(O.a,{children:Object(p.jsx)(h.a,{xxl:12,xl:12,l:12,className:"table-container",children:o})}),Object(p.jsx)(O.a,{children:Object(p.jsx)(h.a,{xxl:12,xl:12,l:12,className:"chart-container",children:i})})]})]})]})}),f="https://corona.lmao.ninja/v2/countries",m="https://api.mapbox.com/styles/v1/j0hn-d03/ckrx3ina30ihn18p683g9oyn1/tiles/256/{z}/{x}/{y}@2x?access_token=pk.eyJ1IjoiajBobi1kMDMiLCJhIjoiY2tyeDJ1d2IyMDUzNjJvbXJjaTVuNjR1biJ9.zspgA8Q6Df0zjna6OS4QJg",y={cases:"cases",deaths:"deaths",recovered:"recovered"},g={absolute:"absolute",per100k:"per 100k population"},N={total:"total",today:"today"},C={index:"index",unit:"unit",period:"period"},D="SET_COVID_DATA",k="SET_CURRENT_INDEX",E="SET_CURRENT_UNIT",S="SET_CURRENT_COUNTRY",I="SET_CURRENT_PERIOD",T=function(e){return{type:k,payload:e}},R=function(e){return{type:E,payload:e}},w=function(e){return{type:I,payload:e}},_=n(7),U=function(e,t){return e.reduce((function(e,n){return e+n[t]}),0)},J=function(e){var t,n=e.covidData,c=e.countryData,r=e.index,a=e.period,o=e.unit,s="today".concat(r[0].toUpperCase()+r.slice(1)),i=0;if(a===N.total){var l;i=null!==(l=null===c||void 0===c?void 0:c[r])&&void 0!==l?l:U(n,r)}else{if(a!==N.today)throw new TypeError("Invalid period");var u;i=null!==(u=null===c||void 0===c?void 0:c[s])&&void 0!==u?u:U(n,s)}o===g.per100k&&(i=Math.round(i/(null!==(t=null===c||void 0===c?void 0:c.population)&&void 0!==t?t:U(n,"population"))*1e5));return i},P=function(e){var t=e.target,n=e.values,r=Object(s.b)(),a=Object(c.useState)(0),o=Object(d.a)(a,2),i=o[0],l=o[1];Object(c.useEffect)((function(){var e=t===C.index?T:t===C.unit?R:t===C.period?w:null;if(!e)throw new TypeError("Invalid prop target");r(e(n[i]))}),[r,n,i,t]);var u=function(e){var t=i+e,c=n.length;l(t<0?(c+t%c)%c:t%c)};return Object(p.jsxs)("div",{className:"control-panel",children:[Object(p.jsx)("button",{className:"control",onClick:function(){return u(-1)},children:"\u25c1"}),Object(p.jsx)("span",{children:n[i]}),Object(p.jsx)("button",{className:"control",onClick:function(){return u(1)},children:"\u25b7"})]})},M=(n(123),function(e){var t=e.searchQuery,n=e.setSearchQuery,r=Object(c.useState)(!0),a=Object(d.a)(r,2),o=a[0],s=a[1];Object(c.useEffect)((function(){s(!t)}),[t]);return Object(p.jsxs)("div",{className:"search-bar",children:[Object(p.jsx)("input",{className:"search-field",type:"search",placeholder:"Search...",value:t,onChange:function(e){n(e.target.value)}}),!o&&Object(p.jsx)("button",{className:"clear-button",onClick:function(){n("")},children:"\xd7"})]})}),L=(n(124),function(){var e,t=Object(s.c)((function(e){return e.covidData})),n=Object(s.c)((function(e){return e.currentIndex})),r=Object(s.c)((function(e){return e.currentUnit})),a=Object(s.c)((function(e){return e.currentPeriod})),o=Object(s.b)(),i=Object(c.useState)(null),l=Object(d.a)(i,2),u=l[0],j=l[1],b=Object(c.useState)(""),O=Object(d.a)(b,2),h=O[0],v=O[1],x=function(e){o({type:S,payload:e}),j(e.country)};return Object(p.jsxs)("div",{className:"block list",children:[Object(p.jsxs)("div",{className:"controls",children:[Object(p.jsx)(P,{target:C.index,values:[y.cases,y.deaths,y.recovered]}),Object(p.jsx)(M,{searchQuery:h,setSearchQuery:v})]}),Object(p.jsx)("ul",{children:t.filter((e=h,function(t){return t.country.toLowerCase().search(e.toLowerCase())>-1})).map((function(e){return Object(p.jsxs)("li",{onClick:function(){return x(e)},className:"list-item ".concat(u===e.country&&"active"),children:[Object(p.jsxs)("div",{className:"country",children:[Object(p.jsx)("img",{src:e.countryInfo.flag,alt:e.countryInfo.iso3,className:"country-flag"}),Object(p.jsx)("span",{className:"country-name",children:e.country})]}),Object(p.jsx)("div",{className:"amount ".concat(n),children:J({covidData:t,countryData:e,index:n,unit:r,period:a})})]},e.country+e.countryInfo._id)}))})]})}),Q=(n(125),function(){var e,t=Object(s.c)((function(e){return e.covidData})),n=Object(s.c)((function(e){return e.currentCountry})),c=Object(s.c)((function(e){return e.currentPeriod})),r=Object(s.c)((function(e){return e.currentUnit}));return Object(p.jsxs)("div",{className:"block table",children:[Object(p.jsx)(P,{target:C.period,values:[N.total,N.today]}),Object(p.jsxs)("table",{children:[Object(p.jsx)("thead",{children:Object(p.jsx)("tr",{children:Object(p.jsx)("th",{colSpan:"2",children:null!==(e=null===n||void 0===n?void 0:n.country)&&void 0!==e?e:"Global"})})}),Object(p.jsxs)("tbody",{children:[Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Cases"}),Object(p.jsx)("td",{children:J({covidData:t,countryData:n,unit:r,period:c,index:y.cases})})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Deaths"}),Object(p.jsx)("td",{className:"deaths",children:J({covidData:t,countryData:n,unit:r,period:c,index:y.deaths})})]}),Object(p.jsxs)("tr",{children:[Object(p.jsx)("td",{children:"Recovered"}),Object(p.jsx)("td",{className:"recovered",children:J({covidData:t,countryData:n,unit:r,period:c,index:y.recovered})})]})]})]}),Object(p.jsx)(P,{target:C.unit,values:[g.absolute,g.per100k]})]})}),V=n(2),z=(n(126),n(242)),A=n(241),F=n(9),B=n.n(F),G=(n(127),function(){var e=Object(s.c)((function(e){return e.covidData})),t=Object(c.useRef)(null),n=Object(s.c)((function(e){return e.currentIndex})),r=Object(s.c)((function(e){return e.currentCountry})),a=Object(c.useState)([0,0]),o=Object(d.a)(a,2),i=o[0],l=o[1],u=Object(c.useState)(!1),j=Object(d.a)(u,2),b=j[0],O=j[1];Object(c.useEffect)((function(){var e,t=null!==(e=null===r||void 0===r?void 0:r.countryInfo)&&void 0!==e?e:{},n=t.lat,c=void 0===n?0:n,a=t.long;l([c,void 0===a?0:a]),O(!!r)}),[r]);var h=Object(c.useCallback)((function(t,c){var r=t.properties,a=r.country,o=r.updated,s=r.cases,i=r.deaths,l=r.recovered,u=function(e){for(var t=e.covidData,n=e.index,c=e.amount,r=e.maxRate,a=void 0===r?8:r,o=e.ratesAmount,s=void 0===o?15:o,i=Math.max.apply(Math,Object(_.a)(t.map((function(e){return e[n]})))),l=s-1;l>0;--l)if(c>=l/s*i)return a*(l+1)/s;return 1*a/s}({covidData:e,index:n,amount:r[n]}),d="\n      <span class='icon-marker ".concat(n,"' style=\"width: ").concat(u,"rem; height: ").concat(u,"rem;\">\n        <span class='icon-marker-tooltip'>\n          <h5>").concat(a,"</h5>\n          <ul>\n            <li>\n              <strong>Confirmed: </strong>\n              <span class='cases'>").concat(s,"</span>\n            </li>\n            <li>\n              <strong>Deaths: </strong>\n              <span class='deaths'>").concat(i,"</span>\n            </li>\n            <li>\n              <strong>Recovered: </strong>\n              <span class='recovered'>").concat(l,"</span>\n            </li>\n            <li>\n              <strong>Last update: </strong>\n              <span>").concat(new Date(o).toLocaleString(),"</span>\n            </li>\n          </ul>\n        </span>\n      </span>\n    ");return B.a.marker(c,{icon:B.a.divIcon({className:"icon",html:d}),riseOnHover:!0})}),[n,e]);return Object(c.useEffect)((function(){var n=t.current.leafletElement,c={type:"FeatureCollection",features:e.map((function(e){var t=e.countryInfo,n=t.lat,c=t.long;return{type:"Feature",properties:Object(V.a)({},e),geometry:{type:"Point",coordinates:[c,n]}}}))},r=new B.a.GeoJSON(c,{pointToLayer:h}).addTo(n);return function(){r.removeFrom(n)}}),[e,h]),Object(p.jsx)("div",{className:"block map",children:Object(p.jsx)(z.a,{ref:t,className:"map-container",center:i,zoom:b?8:3,scrollWheelZoom:!0,children:Object(p.jsx)(A.a,{url:m})})})}),W=n(40);n(234);W.a.defaults.color=getComputedStyle(document.documentElement).getPropertyValue("--text-color-light"),W.a.defaults.borderColor="#b3dee210";var X=function(){var e=Object(s.c)((function(e){return e.covidData})),t=Object(s.c)((function(e){return e.currentCountry}));return Object(p.jsx)("div",{className:"block chart",children:Object(p.jsx)("div",{className:"chart-container",children:Object(p.jsx)(W.b,{data:{labels:["Cases","Deaths","Recovered"],datasets:[{data:[J({covidData:e,countryData:t,index:y.cases,period:N.total,unit:g.absolute}),J({covidData:e,countryData:t,index:y.deaths,period:N.total,unit:g.absolute}),J({covidData:e,countryData:t,index:y.recovered,period:N.total,unit:g.absolute})],backgroundColor:["rgba(54, 162, 235, 0.2)","rgba(255, 99, 132, 0.2)","rgba(75, 192, 192, 0.2)"],borderColor:[getComputedStyle(document.documentElement).getPropertyValue("--text-color-light"),getComputedStyle(document.documentElement).getPropertyValue("--text-color-danger"),getComputedStyle(document.documentElement).getPropertyValue("--text-color-success")],borderWidth:1}]}})})})},Y=(n(235),function(){return Object(p.jsx)("div",{className:"spinner",children:Object(p.jsx)("div",{className:"loadingio-spinner-rolling-tgnvbc7dmop",children:Object(p.jsx)("div",{className:"ldio-gb52ke7jo7",children:Object(p.jsx)("div",{})})})})}),H=function(){var e=Object(c.useState)(!1),t=Object(d.a)(e,2),n=t[0],r=t[1],a=Object(s.b)();return Object(c.useEffect)((function(){(function(){var e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b.a.get(f);case 2:return t=e.sent,e.next=5,t.data;case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()().then((function(e){a(function(e){return{type:D,payload:e}}(e)),r(!0)}))}),[a]),n?Object(p.jsx)(x,{listContent:Object(p.jsx)(L,{}),mapContent:Object(p.jsx)(G,{}),tableContent:Object(p.jsx)(Q,{}),chartContent:Object(p.jsx)(X,{})}):Object(p.jsx)(Y,{})},Z=n(90),q={covidData:[],currentIndex:y.cases,currentUnit:g.absolute,currentPeriod:N.total,currentCountry:null},K=Object(Z.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case D:return Object(V.a)(Object(V.a)({},e),{},{covidData:t.payload});case k:return Object(V.a)(Object(V.a)({},e),{},{currentIndex:t.payload});case E:return Object(V.a)(Object(V.a)({},e),{},{currentUnit:t.payload});case S:return Object(V.a)(Object(V.a)({},e),{},{currentCountry:t.payload});case I:return Object(V.a)(Object(V.a)({},e),{},{currentPeriod:t.payload});default:return e}}));o.a.render(Object(p.jsx)(r.a.StrictMode,{children:Object(p.jsx)(s.a,{store:K,children:Object(p.jsx)(H,{})})}),document.getElementById("root"))},99:function(e,t,n){}},[[236,1,2]]]);
//# sourceMappingURL=main.56f902a3.chunk.js.map